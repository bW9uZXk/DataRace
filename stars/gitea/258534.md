分类，写入多个文件中，将FP，TP进行分类，同时在其中进一步按照原因分类，并按照原因命名文件，这样后期报告时简单一点

external function: code.gitea.io/gitea/modules/log
===================================================
Potential race condition:
 Access1:
        comment.TreePath = util.CleanPath(comment.TreePath)
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/migrate.go:452:37 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/gitea_uploader.go:869:12
 
 Access2:
        log.Warn("GetRepoRawDiffForFile failed when migrating [%s, %s, %s, %s]: %v", g.gitRepo.Path, pr.MergeBase, headCommitID, comment.TreePath, err)
                                                                                                                                         ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/migrate.go:445:38 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/gitea_uploader.go:883:5 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/gitea_uploader.go:880:135 
===================================================
Potential race condition:
 Access1:
        comment.TreePath = util.CleanPath(comment.TreePath)
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/migrate.go:452:37 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/gitea_uploader.go:869:12
 
 Access2:
        if err := git.GetRepoRawDiffForFile(g.gitRepo, pr.MergeBase, headCommitID, git.RawDiffNormal, comment.TreePath, writer); err != nil {
                                                                                                              ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/migrate.go:445:38 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/gitea_uploader.go:883:5 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/migrations/gitea_uploader.go:878:107 
===================================================
Potential race condition:
 Access1:
        unmerged <- &unmergedFile{err: fmt.Errorf("unexpected stage %d for path %s in git ls-files -u -z", line.stage, line.path)}
                                     ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:195:33
 
 Access2:
        if file.err != nil {
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:260:11 
===================================================
Potential race condition:
 Access1:
        unmerged <- &unmergedFile{err: fmt.Errorf("unexpected stage %d for path %s in git ls-files -u -z", line.stage, line.path)}
                                     ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:195:33
 
 Access2:
        return false, nil, file.err
                                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:262:28 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil && file.stage2 == nil && file.stage3 != nil:
                  ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:152:12
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil && file.stage2 != nil && file.stage3 != nil && file.stage2.sha == file.stage3.sha && file.stage2.mode != file.stage3.mode:
                                                                                                                          ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:147:116
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil && file.stage2 != nil && file.stage3 != nil && file.stage2.sha == file.stage3.sha && file.stage2.mode != file.stage3.mode:
                                                                                                                                              ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:147:136
 
 Access2:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        case file.stage1 == nil && file.stage2 != nil && file.stage3 != nil && file.stage2.sha == file.stage3.sha && file.stage2.mode != file.stage3.mode:
                                                                                                       ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:147:97 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        case file.stage1 == nil && file.stage2 != nil && file.stage3 != nil && file.stage2.sha == file.stage3.sha && file.stage2.mode != file.stage3.mode:
                                                              ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:147:56 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        case file.stage1 == nil && file.stage2 == nil && file.stage3 != nil:
                                                              ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:152:56 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        case file.stage2 != nil && file.stage3 != nil:
                                        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:162:34 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        if file.stage2.mode == "120000" || file.stage3.mode == "120000" {
                                                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:165:43 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        if file.stage2.mode != file.stage3.mode {
                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:173:31 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        if file.stage2.mode == "160000" || file.stage3.mode == "160000" {
                                                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:169:43 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        head, _, err := git.NewCommand(ctx, "unpack-file").AddDynamicArguments(file.stage3.sha).RunStdString(&git.RunOpts{Dir: tmpBasePath})
                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:196:79 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        return fmt.Errorf("unable to get head object:%s at path: %s for merging. Error: %w", file.stage3.sha, file.stage3.path, err)
                                                                                                  ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:198:94 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        return fmt.Errorf("unable to get head object:%s at path: %s for merging. Error: %w", file.stage3.sha, file.stage3.path, err)
                                                                                                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:198:111 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        case file.stage1 != nil && (file.stage2 == nil || file.stage3 == nil):
                                                               ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:128:57 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        } else if file.stage3 != nil {
                       ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:223:18 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        return &errMergeConflict{file.stage3.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:224:34 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        if (file.stage2 != nil && !file.stage1.SameAs(file.stage2)) || (file.stage3 != nil && !file.stage1.SameAs(file.stage3)) {
                                                                             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:132:72 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        if (file.stage2 != nil && !file.stage1.SameAs(file.stage2)) || (file.stage3 != nil && !file.stage1.SameAs(file.stage3)) {
                                                                                                                       ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:132:114 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        case file.stage1 == nil && file.stage2 != nil && (file.stage3 == nil || file.stage2.SameAs(file.stage3)):
                                                               ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:139:57 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        case file.stage1 == nil && file.stage2 != nil && (file.stage3 == nil || file.stage2.SameAs(file.stage3)):
                                                                                                        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:139:98 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        return gitRepo.AddObjectToIndex(file.stage3.mode, git.MustIDFromString(file.stage3.sha), file.stage3.path)
                                             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:156:40 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        return gitRepo.AddObjectToIndex(file.stage3.mode, git.MustIDFromString(file.stage3.sha), file.stage3.path)
                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:156:79 
===================================================
Potential race condition:
 Access1:
        next.stage3 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:192:9
 
 Access2:
        return gitRepo.AddObjectToIndex(file.stage3.mode, git.MustIDFromString(file.stage3.sha), file.stage3.path)
                                                                                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:156:97 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil && file.stage2 != nil && file.stage3 != nil && file.stage2.sha == file.stage3.sha && file.stage2.mode != file.stage3.mode:
                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:147:78
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        if err := gitRepo.AddObjectToIndex(file.stage2.mode, git.MustIDFromString(file.stage2.sha), file.stage2.path); err != nil {
                                                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:143:43
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil && file.stage2 != nil && file.stage3 != nil && file.stage2.sha == file.stage3.sha && file.stage2.mode != file.stage3.mode:
                                        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:147:34
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage2.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:161:33
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil:
                  ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:157:12
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil && file.stage2 == nil && file.stage3 != nil:
                                        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:152:34
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        if file.stage2.mode == "120000" || file.stage3.mode == "120000" {
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:165:11
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        case file.stage2 != nil && file.stage3 != nil:
                  ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:162:12
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        if file.stage1 != nil {
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:219:11
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage2.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:167:34
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        if err := gitRepo.AddObjectToIndex(file.stage2.mode, git.MustIDFromString(file.stage2.sha), file.stage2.path); err != nil {
                                                                                       ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:143:82
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        if file.stage2.mode == "160000" || file.stage3.mode == "160000" {
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:169:11
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage2.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:171:34
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        if file.stage2.mode != file.stage3.mode {
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:173:11
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage2.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:175:34
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        root, _, err := git.NewCommand(ctx, "unpack-file").AddDynamicArguments(file.stage1.sha).RunStdString(&git.RunOpts{Dir: tmpBasePath})
                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:179:79
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        if err := gitRepo.AddObjectToIndex(file.stage2.mode, git.MustIDFromString(file.stage2.sha), file.stage2.path); err != nil {
                                                                                                         ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:143:100
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return fmt.Errorf("unable to get root object: %s at path: %s for merging. Error: %w", file.stage1.sha, file.stage1.path, err)
                                                                                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:181:95
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        return fmt.Errorf("unable to get root object: %s at path: %s for merging. Error: %w", file.stage1.sha, file.stage1.path, err)
                                                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:181:112
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        base, _, err := git.NewCommand(ctx, "unpack-file").AddDynamicArguments(file.stage2.sha).RunStdString(&git.RunOpts{Dir: tmpBasePath})
                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:188:79
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return fmt.Errorf("unable to get base object: %s at path: %s for merging. Error: %w", file.stage2.sha, file.stage2.path, err)
                                                                                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:190:95
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return fmt.Errorf("unable to get base object: %s at path: %s for merging. Error: %w", file.stage2.sha, file.stage2.path, err)
                                                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:190:112
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        case file.stage1 == nil && file.stage2 != nil && (file.stage3 == nil || file.stage2.SameAs(file.stage3)):
                  ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:139:12
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        case file.stage1 != nil && (file.stage2 == nil || file.stage3 == nil):
                                         ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:128:35
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage2.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:208:34
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        hash, _, err := git.NewCommand(ctx, "hash-object", "-w", "--path").AddDynamicArguments(file.stage2.path, base).RunStdString(&git.RunOpts{Dir: tmpBasePath})
                                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:212:95
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return gitRepo.AddObjectToIndex(file.stage2.mode, git.MustIDFromString(hash), file.stage2.path)
                                             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:217:40
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return gitRepo.AddObjectToIndex(file.stage2.mode, git.MustIDFromString(hash), file.stage2.path)
                                                                                           ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:217:86
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage1.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:220:34
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage1.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:134:34
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        } else if file.stage2 != nil {
                       ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:221:18
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage2.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:222:34
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        return gitRepo.RemoveFilesFromIndex(file.stage1.path)
                                                 ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:138:44
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        if (file.stage2 != nil && !file.stage1.SameAs(file.stage2)) || (file.stage3 != nil && !file.stage1.SameAs(file.stage3)) {
                                        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:132:35
 
 Access2:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31 
===================================================
Potential race condition:
 Access1:
        if (file.stage2 != nil && !file.stage1.SameAs(file.stage2)) || (file.stage3 != nil && !file.stage1.SameAs(file.stage3)) {
                                                           ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:132:54
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31
 
 Access2:
        if (file.stage2 != nil && !file.stage1.SameAs(file.stage2)) || (file.stage3 != nil && !file.stage1.SameAs(file.stage3)) {
                                                                                                    ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:132:95 
===================================================
Potential race condition:
 Access1:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31
 
 Access2:
        case file.stage1 != nil && (file.stage2 == nil || file.stage3 == nil):
                  ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:128:12 
===================================================
Potential race condition:
 Access1:
        next = &unmergedFile{stage1: line}
                                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:178:31
 
 Access2:
        case file.stage1 == nil && file.stage2 != nil && file.stage3 != nil && file.stage2.sha == file.stage3.sha && file.stage2.mode != file.stage3.mode:
                  ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:147:12 
===================================================
Potential race condition:
 Access1:
        return &errMergeConflict{file.stage2.path}
                                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:151:33
 
 Access2:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9 
===================================================
Potential race condition:
 Access1:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9
 
 Access2:
        case file.stage1 == nil && file.stage2 != nil && (file.stage3 == nil || file.stage2.SameAs(file.stage3)):
                                        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:139:34 
===================================================
Potential race condition:
 Access1:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9
 
 Access2:
        case file.stage1 == nil && file.stage2 != nil && (file.stage3 == nil || file.stage2.SameAs(file.stage3)):
                                                                                     ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:139:79 
===================================================
Potential race condition:
 Access1:
        next.stage2 = line
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:243:18 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch_unmerged.go:185:9
 
 Access2:
        if (file.stage2 != nil && !file.stage1.SameAs(file.stage2)) || (file.stage3 != nil && !file.stage1.SameAs(file.stage3)) {
                 ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:266:25 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/pull/patch.go:132:12 
===================================================
Potential race condition:
 Access1:
        defer close(c.loggedOut)
                      ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:85:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:647:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:681:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:592:40 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:517:13 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:132:16
 
 Access2:
        loggedOut: make(chan struct{}),
                 ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:87:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:607:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:636:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:584:12 
===================================================
Potential race condition:
 Access1:
        state:     imap.ConnectingState,
             ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:87:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:607:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:636:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:586:8
 
 Access2:
        state := c.state
                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:85:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:647:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:681:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:592:40 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:517:13 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:135:31 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:146:12 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:299:13 
===================================================
Potential race condition:
 Access1:
        ErrorLog:  log.New(os.Stderr, "imap/client: ", log.LstdFlags),
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:87:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:607:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:636:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:587:11
 
 Access2:
        c.ErrorLog.Println("cannot handle response ", resp, err)
          ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:85:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:647:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:681:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:592:40 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:517:13 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:135:31 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:162:5 
===================================================
Potential race condition:
 Access1:
        ErrorLog:  log.New(os.Stderr, "imap/client: ", log.LstdFlags),
                ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:87:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:607:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:636:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:587:11
 
 Access2:
        c.ErrorLog.Println("error reading response:", err)
          ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:85:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:647:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:681:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:592:40 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:517:13 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:137:6 
===================================================
Potential race condition:
 Access1:
        resp, err := imap.ReadResp(c.conn.Reader)
                                     ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:85:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:647:26 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:681:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:592:40 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:517:13 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:135:31 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:150:31
 
 Access2:
        conn:      imap.NewConn(conn, r, w),
            ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/services/mailer/incoming/incoming.go:87:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:607:23 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:636:15 ->
/home/zhaozixiao/.gvm/pkgsets/go1.19/global/pkg/mod/github.com/emersion/go-imap@v1.2.1/client/client.go:583:7 
===================================================
Potential race condition:
 Access1:
        client = m.getRedisClient(connection)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:62:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:61:3
 
 Access2:
        return client
               ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:67:9 
===================================================
Potential race condition:
 Access1:
        client = m.getRedisClient(connection)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:62:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:61:3
 
 Access2:
        return client
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:67:2 
===================================================
Potential race condition:
 Access1:
        db, err = m.getLevelDB(connection)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:69:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:68:3
 
 Access2:
        return db, err
               ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:74:9 
===================================================
Potential race condition:
 Access1:
        db, err = m.getLevelDB(connection)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:69:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:68:3
 
 Access2:
        return db, err
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:74:2 
===================================================
Potential race condition:
 Access1:
        db, err = m.getLevelDB(connection)
            ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:69:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:68:7
 
 Access2:
        return db, err
                   ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:74:13 
===================================================
Potential race condition:
 Access1:
        db, err = m.getLevelDB(connection)
            ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:69:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:68:7
 
 Access2:
        return db, err
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:74:2 
===================================================
Potential race condition:
 Access1:
        err = SanitizeReader(pr2, renderer.Name(), output)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:239:4 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:236:4
 
 Access2:
        err = PostProcess(ctx, pr, pw2)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:254:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:247:4 
===================================================
Potential race condition:
 Access1:
        err = SanitizeReader(pr2, renderer.Name(), output)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:239:4 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:236:4
 
 Access2:
        _, err = io.Copy(pw2, pr)
           ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:254:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:249:7 
===================================================
Potential race condition:
 Access1:
        err = SanitizeReader(pr2, renderer.Name(), output)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:239:4 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:236:4
 
 Access2:
        return err
               ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:262:9 
===================================================
Potential race condition:
 Access1:
        err = PostProcess(ctx, pr, pw2)
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:254:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:247:4
 
 Access2:
        return err
               ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:262:9 
===================================================
Potential race condition:
 Access1:
        _, err = io.Copy(pw2, pr)
           ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:254:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:249:7
 
 Access2:
        return err
               ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/markup/renderer.go:262:9 
===================================================
Potential race condition:
 Access1:
        recovered = recover()
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:69:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:65:4 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:60:4
 
 Access2:
        if recovered != nil {
           ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:71:5 
===================================================
Potential race condition:
 Access1:
        recovered = recover()
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:69:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:65:4 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:60:4
 
 Access2:
        panic(recovered)
              ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_leveldb.go:72:9 
===================================================
Potential race condition:
 Access1:
        recovered = recover()
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:62:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:58:4 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:53:4
 
 Access2:
        if recovered != nil {
           ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:64:5 
===================================================
Potential race condition:
 Access1:
        recovered = recover()
        ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:62:3 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:58:4 ->
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:53:4
 
 Access2:
        panic(recovered)
              ^
/home/zhaozixiao/Documents/GRace/tests/stars/gitea/modules/nosql/manager_redis.go:65:9 
Total number of data race: 89

